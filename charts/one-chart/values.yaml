# -- Homelab settings
homelab:
  # -- Homelab category label. Defaults to "apps".
  category: apps
  # -- Homelab realm label. Defaults to "playground".
  realm: playground

# -- Number of replicas for the deployment
replicaCount: 1

image:
  # -- Container image repository
  repository: nginx
  # -- Image pull policy
  pullPolicy: IfNotPresent
  # -- Overrides the image tag whose default is the chart appVersion
  tag: ""

# -- Image pull secrets for private registries
imagePullSecrets: []

# -- Override the chart name
nameOverride: ""

# -- Override the full resource name
fullnameOverride: ""

# -- Service account name for the pod. Leave empty to use the default service account.
# WARNING: Using the default service account is not recommended for applications that
# require Kubernetes API access. Create a dedicated ServiceAccount with minimal RBAC.
serviceAccountName: ""

# -- Automatically mount service account token. Set to true for applications that
# need Kubernetes API access. Default is false for security (secure by default).
automountServiceAccountToken: false

# -- Environment variables for the deployment
environmentVariables:
#   -- Container environment variables
  container:
#     -- Enabled environment variables at the container level
    enabled: false
#     -- Environment variables to set in the container
#     variables:
#       - name: AN_ENVIRONMENT_VARIABLE
#         value: "potato"
#       - name: ANOTHER_ENVIRONMENT_VARIABLE 
#         value: "other potato"
#   -- Environment variables from secrets
  fromSecret:
#     -- Enabled environment variables from secrets
    enabled: false
#     -- List with the name of the secrets to mount as environment variables
#     secrets:
#       - some-secret
#   -- Environment variables from config maps
  fromConfigMap:
#     -- Enabled environment variables from config maps
    enabled: false
#     -- List with the name of the config maps to mount as environment variables
#     configMaps: 
#       - some-configmap

# -- Annotations for the pod
podAnnotations: {}

# -- Additional labels for the pod
podLabels: {}

# -- Pod-level security context
podSecurityContext: {}
  # -- fsGroup: 2000

# -- Add additional containers
extraContainers: []
  # - name: logwatcher
  #   image: some-registry/logwatcher
  #   imagePullPolicy: Always
  #   resources:
  #     requests:
  #       cpu: 100m
  #       memory: 5Mi
  #     limits:
  #       cpu: 100m
  #       memory: 5Mi
  #   volumeMounts:
  #   - name: logs
  #     mountPath: /var/log/mylogs

# -- Init containers to run before the main container
initContainers: []
  # - name: init-config
  #   image: busybox:1.36
  #   command:
  #     - sh
  #     - -c
  #     - |
  #       echo "Initializing..."
  #       cp /tmp/source/* /app/config/
  #   volumeMounts:
  #     - name: config-source
  #       mountPath: /tmp/source
  #       readOnly: true
  #     - name: config
  #       mountPath: /app/config

# -- Container-level security context
securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  # -- Kubernetes service type. Defaults to ClusterIP.
  type: ClusterIP
  # -- LoadBalancer IP (for MetalLB or cloud LB)
  # loadBalancerIP: ""
  # -- MetalLB IP pool name
  # ipPool: ""
  # -- Enable shared IP feature for LoadBalancer services
  sharedIpEnabled: false
  # -- Service port. Defaults to 80. Kept for backward compatibility. Use `ports` for multiple ports.
  port: 80
  # -- Service ports. Takes precedence over `service.port`.
  ports: []
    # - name: http
    #   port: 80
    #   containerPort: 80
    #   hostPort: 8080
    #   protocol: TCP
    # - name: metrics
    #   port: 9091
    #   containerPort: 9091
    #   protocol: TCP
  # -- Annotations for the service
  annotations: {}

prometheus:
  # -- Enable Prometheus ServiceMonitor (requires Prometheus Operator)
  enabled: false
  # -- Service port name to scrape metrics from (must match service.ports[].name)
  portName: http
  # -- Path to scrape metrics from
  path: /metrics
  # -- Interval at which to scrape metrics
  interval: 30s
  # -- Scrape timeout
  scrapeTimeout: 10s
  # -- Additional labels for the ServiceMonitor (e.g., prometheus: kube-prometheus-stack)
  additionalLabels: {}
  # -- Relabeling configs for the ServiceMonitor
  relabelings: []
  # -- MetricRelabeling configs for the ServiceMonitor
  metricRelabelings: []

# -- HTTPRoute configuration for Gateway API
httpRoute:
  # -- Enable HTTPRoute (Gateway API)
  enabled: false
  # -- Annotations for the HTTPRoute
  annotations: {}
  # -- Parent Gateway reference
  parentRef:
    # -- Name of the parent Gateway. Defaults to "internal-gateway"
    name: internal-gateway
    # -- Namespace of the parent Gateway. Defaults to "ingress-nginx"
    namespace: ingress-nginx
    # -- Section name (listener) on the Gateway for TLS. Use "https" for TLS termination
    # sectionName: https
  # -- Hostnames for the HTTPRoute
  hostnames:
    - chart-example.local
  # -- Routing rules
  rules:
    - matches:
        - path: /
          pathType: PathPrefix
      # -- Port to route traffic to. Defaults to 80
      port: 80
      # -- Custom backend references (optional, overrides default service)
      # backendRefs:
      #   - name: my-service
      #     port: 8080
      #     weight: 100
      # -- Request/response filters (optional)
      # filters:
      #   - type: RequestHeaderModifier
      #     requestHeaderModifier:
      #       add:
      #         - name: X-Custom-Header
      #           value: custom-value

# -- DNS configuration for the application
dns:
  #   -- Enable DNS configuration
  enabled: false
  #   -- DNS policy. Defaults to ClusterFirst
  #   policy: ClusterFirst
  #   -- DNS configuration
  # config:
  #   nameservers:
  #     - 8.8.8.8
  #     - 8.8.4.4
  #   searches:
  #     - my-svc.namespace.svc.cluster.local
  #   options:
  #     - name: ndots
  #       value: '5'

# -- Host network configuration
# -- Use the host's network namespace. Required for applications that need broadcast or raw socket access.
hostNetwork: false

# -- Resource requests and limits
resources: {}
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

# -- Liveness probe configuration
# livenessProbe:
#   httpGet:
#     path: /
#     port: http

# -- Readiness probe configuration
# readinessProbe:
#   httpGet:
#     path: /
#     port: http

# -- Additional volumes for the pod
volumes: []
# - name: foo
#   secret:
#     secretName: mysecret
#     optional: false

# -- Additional volume mounts for the container
volumeMounts: []
# - name: foo
#   mountPath: "/etc/foo"
#   readOnly: true

persistentVolume:
  # -- Enable persistent volume claim
  enabled: false
  # -- Storage class for PVC. Defaults to "longhorn-default-sc"
  storageClass: "longhorn-default-sc"
  # -- Access modes for PVC. Defaults to ReadWriteOnce
  accessModes:
    - ReadWriteOnce
  # -- Size of the persistent volume. Defaults to 1Gi
  size: 1Gi
  # -- Mount path for the persistent volume. Defaults to /data
  mountPath: /data

# -- List of persistent volumes for the deployment. Takes precedence over `persistentVolume` (single volume) for backward compatibility.
persistentVolumes: []
# - name: data
#   storageClass: "longhorn-default-sc"
#   accessModes:
#     - ReadWriteOnce
#   size: 10Gi
#   mountPath: /data
# - name: backup
#   storageClass: "longhorn-backup-sc"
#   accessModes:
#     - ReadWriteOnce
#   size: 20Gi
#   mountPath: /backup

# -- 1Password integration settings
onepassword:
  # -- Enable creating a OnePasswordItem to generate a Kubernetes Secret.
  enabled: false
  # -- The name of the 1Password vault.
  vault: "Homelab"
  # -- The name of the item within the vault.
  item: ""
  # -- The name of the Kubernetes Secret to be created by the operator. Defaults to <Release Name>-onepassword.
  secretName: ""

# -- Node selector for pod scheduling
nodeSelector: {}

# -- Tolerations for pod scheduling
tolerations: []

# -- Affinity rules for pod scheduling
affinity: {}


# -- Deployment strategy
strategy: {}

# -- Cloudflared settings
cloudflared:
  # -- Enable Cloudflared deployment
  enabled: false
  # -- Number of replicas for the Cloudflared deployment
  replicaCount: 2
  # -- Cloudflared image repository
  image:
    repository: cloudflare/cloudflared
    tag: 2026.2.0
  # -- Deployment strategy
  strategy:
    type: Recreate
  # -- Annotations for the Cloudflared pod
  podAnnotations: {}
  # -- Additional labels for the Cloudflared pod
  podLabels: {}
  # -- Tunnel configuration
  tunnel:
    # -- Name of the Cloudflare tunnel
    name: ""
    # -- Public hostname for the tunnel
    publicHostname: ""
    # -- Local service hostname to expose through the tunnel
    localHostname: ""
  # -- 1Password integration settings for Cloudflared credentials
  onepassword:
    # -- The name of the 1Password vault where Cloudflared credentials are stored
    vault: "Homelab"
    # -- The name of the item within the vault containing Cloudflared credentials
    item: ""
  # -- Prometheus settings for Cloudflared
  prometheus:
    # -- Enable Prometheus ServiceMonitor for Cloudflared (requires Prometheus Operator)
    enabled: false
    # -- Service port name to scrape metrics from for Cloudflared
    portName: http-metrics
    # -- Path to scrape metrics from for Cloudflared
    path: /metrics
    # -- Interval at which to scrape metrics for Cloudflared
    interval: 30s
    # -- Scrape timeout for Cloudflared
    scrapeTimeout: 10s
    # -- Additional labels for the Cloudflared ServiceMonitor
    additionalLabels: {}
    # -- Relabeling configs for the Cloudflared ServiceMonitor
    relabelings: []
    # -- MetricRelabeling configs for the Cloudflared ServiceMonitor
    metricRelabelings: []
